"use strict";(self.webpackChunkmhira_docs=self.webpackChunkmhira_docs||[]).push([[655],{3905:function(e,t,i){i.d(t,{Zo:function(){return m},kt:function(){return c}});var n=i(7294);function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function r(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function o(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?r(Object(i),!0).forEach((function(t){a(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function s(e,t){if(null==e)return{};var i,n,a=function(e,t){if(null==e)return{};var i,n,a={},r=Object.keys(e);for(n=0;n<r.length;n++)i=r[n],t.indexOf(i)>=0||(a[i]=e[i]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)i=r[n],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(a[i]=e[i])}return a}var l=n.createContext({}),u=function(e){var t=n.useContext(l),i=t;return e&&(i="function"==typeof e?e(t):o(o({},t),e)),i},m=function(e){var t=u(e.components);return n.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var i=e.components,a=e.mdxType,r=e.originalType,l=e.parentName,m=s(e,["components","mdxType","originalType","parentName"]),d=u(i),c=a,h=d["".concat(l,".").concat(c)]||d[c]||p[c]||r;return i?n.createElement(h,o(o({ref:t},m),{},{components:i})):n.createElement(h,o({ref:t},m))}));function c(e,t){var i=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=i.length,o=new Array(r);o[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:a,o[1]=s;for(var u=2;u<r;u++)o[u]=i[u];return n.createElement.apply(null,o)}return n.createElement.apply(null,i)}d.displayName="MDXCreateElement"},4169:function(e,t,i){i.r(t),i.d(t,{assets:function(){return m},contentTitle:function(){return l},default:function(){return c},frontMatter:function(){return s},metadata:function(){return u},toc:function(){return p}});var n=i(7462),a=i(3366),r=(i(7294),i(3905)),o=["components"],s={sidebar_position:9},l="Questionnaires",u={unversionedId:"guide-for-admins/questionnaires",id:"guide-for-admins/questionnaires",title:"Questionnaires",description:"Creating an xlsform",source:"@site/docs/3-guide-for-admins/9-questionnaires.md",sourceDirName:"3-guide-for-admins",slug:"/guide-for-admins/questionnaires",permalink:"/documentation/docs/guide-for-admins/questionnaires",draft:!1,editUrl:"https://github.com/mhira-project/documentation/edit/main/docs/3-guide-for-admins/9-questionnaires.md",tags:[],version:"current",sidebarPosition:9,frontMatter:{sidebar_position:9},sidebar:"tutorialSidebar",previous:{title:"users",permalink:"/documentation/docs/guide-for-admins/users"},next:{title:"Installation guide",permalink:"/documentation/docs/category/installation-guide"}},m={},p=[{value:"Creating an xlsform",id:"creating-an-xlsform",level:2},{value:"Available question types",id:"available-question-types",level:3},{value:"Other specifics to MHIRA xlsform implementation",id:"other-specifics-to-mhira-xlsform-implementation",level:3},{value:"Unique identifier for questionnaires.",id:"unique-identifier-for-questionnaires",level:3},{value:"Validating your xlsform",id:"validating-your-xlsform",level:3},{value:"Uploading your xlsform to MHIRA to create a questionnaire",id:"uploading-your-xlsform-to-mhira-to-create-a-questionnaire",level:2},{value:"Questionnaire list",id:"questionnaire-list",level:2}],d={toc:p};function c(e){var t=e.components,s=(0,a.Z)(e,o);return(0,r.kt)("wrapper",(0,n.Z)({},d,s,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"questionnaires"},"Questionnaires"),(0,r.kt)("h2",{id:"creating-an-xlsform"},"Creating an xlsform"),(0,r.kt)("p",null,"Adding questionnaires in MHIRA is based on the ",(0,r.kt)("a",{parentName:"p",href:"https://xlsform.org/"},"xlsfrom")," which is a standard format for authoring forms.\nThe first step is to create an excel file with the specification of the xlsform format to represent the questionnaire you would like to add to MHIRA.\nTo create this excel file, please follow the instructions on the ",(0,r.kt)("a",{parentName:"p",href:"https://xlsform.org/"},"xlsform guide")," (external to our project)."),(0,r.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"Xlsform is a sophisticated format aimed at research. For MHIRA, we have only implemented a limited set of features useful to cover most mental health questionnaires. We will add more features in the future as needed. The current document details the available features."))),(0,r.kt)("p",null," In short, your excel file will need 3 worksheets:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("a",{parentName:"li",href:"https://xlsform.org/en/#the-survey-worksheet"},"The survey worksheet"),": is a list of the questions of the questionnaires."),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("a",{parentName:"li",href:"https://xlsform.org/en/#the-choices-worksheet"},"The choices worksheet")," is used to set the answer options (e.g., for multiple choice type questions)."),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("a",{parentName:"li",href:"https://xlsform.org/en/#settings-worksheet"},"Settings worksheet"),": is used to set meta data about the questionnaire.")),(0,r.kt)("h3",{id:"available-question-types"},"Available question types"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://xlsform.org/en/#question-types"},"Here")," you can find a list of question types available in xlsform format.  "),(0,r.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"MHIRA currently offers the following question types:"),(0,r.kt)("ul",{parentName:"div"},(0,r.kt)("li",{parentName:"ul"},"text"),(0,r.kt)("li",{parentName:"ul"},"decimal"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://xlsform.org/en/#multiple-choice"},"Multiple choice"),": ",(0,r.kt)("em",{parentName:"li"},"select_one")," and ",(0,r.kt)("em",{parentName:"li"},"select_multiple")),(0,r.kt)("li",{parentName:"ul"},"checkbox"),(0,r.kt)("li",{parentName:"ul"},"date"),(0,r.kt)("li",{parentName:"ul"},"time"),(0,r.kt)("li",{parentName:"ul"},"dateTime")))),(0,r.kt)("h3",{id:"other-specifics-to-mhira-xlsform-implementation"},"Other specifics to MHIRA xlsform implementation"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Simple  ",(0,r.kt)("a",{parentName:"li",href:"https://xlsform.org/en/#grouping-questions"},"grouping of questions")," of questions is available in MHIRA. ",(0,r.kt)("em",{parentName:"li"},"Please note that begin_group and end_group are required in MHIRA"),". "),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://xlsform.org/en/#skipping"},"Skipping")," is available. "),(0,r.kt)("li",{parentName:"ul"},"Questions can be set to be ",(0,r.kt)("a",{parentName:"li",href:"https://xlsform.org/en/#required"},"required"),". However, required messages do not currently work."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://xlsform.org/en/#constraints"},"Constrains")," are currently not implemented."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://xlsform.org/en/#multiple-language-support"},"Multi-language support")," is not implemented. You will need to create multiple xlsfoms and set language in the MHIRA user interface. This change is due to how reporting works in MHIRA. ")),(0,r.kt)("p",null,":::warn\nMake sure required items are set to 'required' in the xlsform as\nfailing to do so will likely later result in incomplete reports.\n:::"),(0,r.kt)("h3",{id:"unique-identifier-for-questionnaires"},"Unique identifier for questionnaires."),(0,r.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"On the ",(0,r.kt)("a",{parentName:"p",href:"https://xlsform.org/en/#settings-worksheet"},"settings worksheet"),", the field ",(0,r.kt)("em",{parentName:"p"},"form_id")," will be used as the unique identifier for your form. You can only have one form with a given form ID per language (i.e., you can use the same form_id for different languages) in your MHIRA instance.  This field will serve as the abbreviation of the questionnaire."))),(0,r.kt)("h3",{id:"validating-your-xlsform"},"Validating your xlsform"),(0,r.kt)("p",null,"You can use ",(0,r.kt)("a",{parentName:"p",href:"https://getodk.org/xlsform/"},"this website")," to validate your forms. This will indicate any violation of the format. "),(0,r.kt)("h2",{id:"uploading-your-xlsform-to-mhira-to-create-a-questionnaire"},"Uploading your xlsform to MHIRA to create a questionnaire"),(0,r.kt)("p",null,"To upload your questionnaire to MHIRA, please select \u201cupload questionnaire\u201d from the navigation bar. "),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"upload_questionnaire",src:i(1187).Z,title:"Uploading questionnaires",width:"1860",height:"1241"})),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Select your ",(0,r.kt)("em",{parentName:"li"},"xlsform")," on your local drive to upload it with the \u201cchoose file\u201d button."),(0,r.kt)("li",{parentName:"ol"},"Provide a long name for your form. "),(0,r.kt)("li",{parentName:"ol"},"Select a status (this field has no impact on the behaviour of the software, but the field is required)"),(0,r.kt)("li",{parentName:"ol"},"Select a language"),(0,r.kt)("li",{parentName:"ol"},"Provide copyright information"),(0,r.kt)("li",{parentName:"ol"},"Feel free to provide keyworks, link to a website or describe license terms. "),(0,r.kt)("li",{parentName:"ol"},"Finally, click \u201cUpload Questionnaire\u201d which is accessible by providing the mandatory information (marked with the red asterix). ")),(0,r.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},(0,r.kt)("em",{parentName:"p"},"Uniqueness of questionnaires")),(0,r.kt)("p",{parentName:"div"},"It is not possible to upload the same questionnaire multiple times. An attempt to do so will result in an error.",(0,r.kt)("br",{parentName:"p"}),"\n","The unique identifier consists of a combination of:"),(0,r.kt)("ol",{parentName:"div"},(0,r.kt)("li",{parentName:"ol"},"The abbreviation which is set via the from_ID column in the ",(0,r.kt)("a",{parentName:"li",href:"https://xlsform.org/en/#settings-worksheet"},"settings worksheet")," of the xlsform"),(0,r.kt)("li",{parentName:"ol"},"The selected language (making it possible to have the same questionnaire in multiple languages)  ")),(0,r.kt)("p",{parentName:"div"},"If you want to update the questionnaire xlsform, you will need to archive the questionnaire and upload it again."))),(0,r.kt)("p",null,"Currently, there is no viewing of the uploaded questionnaire in the questionnaire menu. Please start an assessment with the questionnaire to check how it looks. "),(0,r.kt)("h2",{id:"questionnaire-list"},"Questionnaire list"),(0,r.kt)("p",null,"The uploaded questionnaires are listed under the \u201cquestionnaires\u201d menu accessible from the navigation menu. "),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"questionnaire_list",src:i(8340).Z,title:"questionnaire list",width:"3822",height:"818"})),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Left mouse click on a questionnaire in the list will bring you to the questionnaire detail view in which you can edit the questionnaire fields. You cannot change the uploaded xlsform. This requires archiving the questionnaire and re-uploading it. ")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"With the right mouse click, you open the context menu allowing you to archive the questionnaire (provided you have the permission to do so). "),(0,r.kt)("h2",{parentName:"li",id:"old-versions-of-questionnaires"},"Old versions of questionnaires"))),(0,r.kt)("p",null,"When a questionnaire is used in an assessment, the data collected with the questionnaire is linked to the currently active questionnaire version (the one listed in the questionnaire list with status \u201cpublished\u201d). When you update or archive a questionnaire, the ",(0,r.kt)("em",{parentName:"p"},"old version")," of the questionnaire is kept in the database. It will never be deleted.  This way, questionnaire answers can always be linked to the questionnaire version used. The old versions are listed under the menu \u201cold versions\u201d in the navigation bar."))}c.isMDXComponent=!0},8340:function(e,t,i){t.Z=i.p+"assets/images/questionnaire-list-cf95377b45b3ed0b4cf3830980408198.png"},1187:function(e,t,i){t.Z=i.p+"assets/images/upload-questionnaire-382198141a341bf2391cedae61feceef.png"}}]);