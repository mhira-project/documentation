"use strict";(self.webpackChunkmhira_docs=self.webpackChunkmhira_docs||[]).push([[6679],{3905:(e,t,n)=>{n.d(t,{Zo:()=>h,kt:()=>d});var r=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=r.createContext({}),l=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},h=function(e){var t=l(e.components);return r.createElement(s.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},u=r.forwardRef((function(e,t){var n=e.components,i=e.mdxType,o=e.originalType,s=e.parentName,h=p(e,["components","mdxType","originalType","parentName"]),u=l(n),d=i,g=u["".concat(s,".").concat(d)]||u[d]||c[d]||o;return n?r.createElement(g,a(a({ref:t},h),{},{components:n})):r.createElement(g,a({ref:t},h))}));function d(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=n.length,a=new Array(o);a[0]=u;var p={};for(var s in t)hasOwnProperty.call(t,s)&&(p[s]=t[s]);p.originalType=e,p.mdxType="string"==typeof e?e:i,a[1]=p;for(var l=2;l<o;l++)a[l]=n[l];return r.createElement.apply(null,a)}return r.createElement.apply(null,n)}u.displayName="MDXCreateElement"},2133:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>a,default:()=>c,frontMatter:()=>o,metadata:()=>p,toc:()=>l});var r=n(7462),i=(n(7294),n(3905));const o={sidebar_position:5},a="Integrating Shiny Apps for Reporting with MHIRA",p={unversionedId:"mhira-reporting-guide/using-shiny-apps-for-reporting",id:"mhira-reporting-guide/using-shiny-apps-for-reporting",title:"Integrating Shiny Apps for Reporting with MHIRA",description:"MHIRA supports interactive reporting through Shiny apps. Here's how to set up and manage Shiny apps within your MHIRA environment.",source:"@site/docs/5-mhira-reporting-guide/5-using-shiny-apps-for-reporting.md",sourceDirName:"5-mhira-reporting-guide",slug:"/mhira-reporting-guide/using-shiny-apps-for-reporting",permalink:"/documentation/docs/mhira-reporting-guide/using-shiny-apps-for-reporting",draft:!1,editUrl:"https://github.com/mhira-project/documentation/edit/main/docs/5-mhira-reporting-guide/5-using-shiny-apps-for-reporting.md",tags:[],version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5},sidebar:"tutorialSidebar",previous:{title:"GraphQL API",permalink:"/documentation/docs/mhira-reporting-guide/graphql_api"},next:{title:"Patient-report shiny app",permalink:"/documentation/docs/mhira-reporting-guide/patient-report-shiny-app"}},s={},l=[{value:"Deploying Shiny Apps",id:"deploying-shiny-apps",level:2},{value:"Setting the Shiny Apps Directory",id:"setting-the-shiny-apps-directory",level:3},{value:"Cloning a Shiny App Repository",id:"cloning-a-shiny-app-repository",level:3},{value:"Accessing Your Shiny App",id:"accessing-your-shiny-app",level:3},{value:"Dashboard Integration",id:"dashboard-integration",level:2},{value:"Adding a button in MHIRA to connect to your app",id:"adding-a-button-in-mhira-to-connect-to-your-app",level:3},{value:"R Package Management",id:"r-package-management",level:2},{value:"Adding R packages to the shiny server",id:"adding-r-packages-to-the-shiny-server",level:3},{value:"Access to GraphQL API",id:"access-to-graphql-api",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Using Docker Logs",id:"using-docker-logs",level:3},{value:"RStudio Container",id:"rstudio-container",level:3}],h={toc:l};function c(e){let{components:t,...n}=e;return(0,i.kt)("wrapper",(0,r.Z)({},h,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"integrating-shiny-apps-for-reporting-with-mhira"},"Integrating Shiny Apps for Reporting with MHIRA"),(0,i.kt)("p",null,"MHIRA supports interactive reporting through Shiny apps. Here's how to set up and manage Shiny apps within your MHIRA environment."),(0,i.kt)("h2",{id:"deploying-shiny-apps"},"Deploying Shiny Apps"),(0,i.kt)("h3",{id:"setting-the-shiny-apps-directory"},"Setting the Shiny Apps Directory"),(0,i.kt)("p",null,"To host your Shiny apps, place them in the directory indicated by the ",(0,i.kt)("inlineCode",{parentName:"p"},"SHINY_APPS_PATH")," variable in your ",(0,i.kt)("inlineCode",{parentName:"p"},".env")," file. By default, this is set to:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"~/shiny_apps\n")),(0,i.kt)("p",null,"The tilde (~) symbol represents your user's home directory. For example, if your username is ",(0,i.kt)("inlineCode",{parentName:"p"},"john"),", the path ",(0,i.kt)("inlineCode",{parentName:"p"},"~/shiny_apps")," would translate to ",(0,i.kt)("inlineCode",{parentName:"p"},"/home/john/shiny_apps")," on most Unix-based systems."),(0,i.kt)("h3",{id:"cloning-a-shiny-app-repository"},"Cloning a Shiny App Repository"),(0,i.kt)("p",null,"You can easily clone existing Shiny apps into this directory. For example, to clone the MHIRA data export app, navigate to your Shiny apps directory and run:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"git clone https://github.com/mhira-project/data-export.git\n")),(0,i.kt)("p",null,"This will create a ",(0,i.kt)("inlineCode",{parentName:"p"},"data-export")," folder within your ",(0,i.kt)("inlineCode",{parentName:"p"},"~/shiny_apps")," directory containing all the files from the repository."),(0,i.kt)("h3",{id:"accessing-your-shiny-app"},"Accessing Your Shiny App"),(0,i.kt)("p",null,"After deployment, your Shiny app can be accessed via the following URL format:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"https://yourMHIRAdomain/shiny/nameOFyourSHINYapp\n")),(0,i.kt)("h2",{id:"dashboard-integration"},"Dashboard Integration"),(0,i.kt)("p",null,"To link your Shiny app within the MHIRA dashboard, consult the admin reports guide or refer to the following section:"),(0,i.kt)("h3",{id:"adding-a-button-in-mhira-to-connect-to-your-app"},"Adding a button in MHIRA to connect to your app"),(0,i.kt)("p",null,"Please consult ",(0,i.kt)("a",{parentName:"p",href:"/documentation/docs/guide-for-admins/reports"},"this section"),"."),(0,i.kt)("h2",{id:"r-package-management"},"R Package Management"),(0,i.kt)("p",null,"If your Shiny apps require additional R packages, append them to the Dockerfile used for building the Shiny server container or refer to the following section:"),(0,i.kt)("h3",{id:"adding-r-packages-to-the-shiny-server"},"Adding R packages to the shiny server"),(0,i.kt)("p",null,"Packages can be added via the ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/mhira-project/mhira-docker/blob/main/shiny/Dockerfile"},"shiny server docker file")," with the ",(0,i.kt)("a",{parentName:"p",href:"https://rocker-project.org/use/extending#install2.r"},"install2.R command"),"."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-dockerfile"},"RUN install2.r --error \\\n    --deps FALSE \\\n    data.table \\\n    RColorBrewer \\\n    httr \\\n    shinydashboard \\\n    tidyjson \\\n    jsonlite \\\n    htmlwidgets \\\n    DT \\\n    crosstalk\n")),(0,i.kt)("h2",{id:"access-to-graphql-api"},"Access to GraphQL API"),(0,i.kt)("p",null,"For accessing the GraphQL API from within shiny server and RStudio server, please refer to the section about the ",(0,i.kt)("a",{parentName:"p",href:"/documentation/docs/mhira-reporting-guide/graphql_api"},"GraphQL API"),"."),(0,i.kt)("h2",{id:"troubleshooting"},"Troubleshooting"),(0,i.kt)("p",null,"For troubleshooting Shiny app issues, there are a few strategies you can use:"),(0,i.kt)("h3",{id:"using-docker-logs"},"Using Docker Logs"),(0,i.kt)("p",null,"If you want to see output from the shiny app, you can attach the container to your terminal using Docker logs. For instructions on how to use Docker logs, you can refer to the official documentation ",(0,i.kt)("a",{parentName:"p",href:"https://docs.docker.com/engine/reference/commandline/logs/"},"here"),"."),(0,i.kt)("h3",{id:"rstudio-container"},"RStudio Container"),(0,i.kt)("p",null,"Else, we recommend to run the app via the RStudio container and use debugging and breakpoints. Detailed logs and debugging tools are available in RStudio to help diagnose and fix problems."),(0,i.kt)("p",null,"This streamlined process ensures your Shiny apps are effectively incorporated into MHIRA's reporting capabilities."))}c.isMDXComponent=!0}}]);